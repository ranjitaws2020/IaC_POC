@Library('github.com/ranjitaws2020/dotnet-shared-library@pipeline') _

pipeline {
    agent any
      environment {
       sonarlogin = credentials('dotnet-sonar-token')
       }
      tools {        
        jdk 'java_jdk'
      }
    stages {
        stage('Dependencies') {
            steps{
		 RestoreDependencies()
            }
        }
        stage('Build'){
            steps {
		  BuildApp()
            }
        }
         stage('SonarQube Analysis') {
            steps{
	    	SonarApp(sonarlogin)
	    }
        }
        stage('Publish') {
            steps{
		PublishApp()
            }
        }       
        stage('Store war to Nexus') {
            steps{
	    	StoreToNexus()
            }
        }      
    }
}
